<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Mapper for ReservationDao   -->
<mapper namespace="com.omasystem.omas.Dao.ReservationDao">

    <!-- getAllReservationPerSeat --> 

    <select id="getAllReservationPerSeat" parameterType="java.lang.Long">
        SELECT 
            reservation.reservation_id AS reservation_id,
            reservation.seat_id AS seat_id,
            reservation.start_date AS start_date,
            reservation.end_date AS end_date,
            position.position_sh_name AS position_sn,
            pi.fname AS first_name,
            pi.mname AS middle_name,
            pi.lname AS last_name,
            client.client_sh_name AS client_sn
        FROM 
            tbl_reservation AS reservation
        INNER JOIN
			tbl_user AS user
			ON reservation.emp_id = user.emp_id
		LEFT JOIN 
			tbl_position_mst AS position
			ON user.position_id = position.position_id
		LEFT JOIN 
			tbl_personal_info AS pi
            ON reservation.emp_id = pi.emp_id
		INNER JOIN
			tbl_project_mst AS project
			ON reservation.proj_id = project.proj_id
		LEFT JOIN 
			tbl_clients_mst AS client
			ON project.client_id = client.client_id
		WHERE reservation.seat_id = #{seat_id};
    </select>

    <!-- insertReservation --> 

    <insert id="insertReservation" parameterType="com.omasystem.omas.Model.ReservationInputBodyModel">
        INSERT INTO tbl_reservation
            (emp_id, seat_id, proj_id, start_date, end_date, note)
        VALUES
            (#{emp_id}, #{seat_id}, #{proj_id}, #{start_date}, #{end_date}, #{note});
    </insert>

</mapper>